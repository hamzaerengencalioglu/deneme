# 🔐 ESP32-S3 Voice-Controlled Smart Lock System – Full Project Documentation

## 📋 Ultra-Detailed Single Table README (Markdown Format for GitHub)

| Section | Description |
|---------|-------------|
| **🧠 Project Overview** | This project presents a comprehensive smart lock system built using the **ESP32-S3 DevKitM-1** microcontroller. It combines **voice-based user recognition**, **keypad password verification**, **servo motor-based physical feedback**, and **AI-powered voice response capabilities** using Grok Lima 4, an LLM (Large Language Model). Users are authenticated by saying their name into a microphone; if recognized, they enter a password via a 4x4 matrix keypad. Upon correct entry, a servo motor rotates to simulate unlocking. If credentials are incorrect, the servo remains locked, and an audible "Access Denied" message is played. Additionally, users can ask general queries like "What’s the weather like?", which the system processes via LLM and responds with synthesized voice output through a DAC and speaker. |
| **🎯 Objectives** | - Replace traditional authentication with voice + keypad system<br>- Add physical feedback through a servo motor<br>- Integrate AI-based question-answer capability via Grok Lima 4<br>- Provide voice alerts for both accepted and denied access<br>- Enable new user registration (name + password)<br>- Demonstrate real-world integration of embedded hardware, AI, and natural language processing |
| **⚙️ System Flow** | 1. **User speaks their name** into the microphone<br>2. **Whisper (speech-to-text)** transcribes it<br>3. **Name is matched** against stored users<br>4. If matched, user is asked to **enter password** via keypad<br>5. If correct → **servo rotates 180°** to unlock<br>6. If wrong → **servo remains still** and voice says "Access Denied"<br>7. Optional: User can **ask a question** (e.g., "What's the weather?")<br>8. Text sent to **Grok LLM API** → response is **converted to audio** via gTTS<br>9. Audio is **played through PCM5102A DAC + speaker** |
| **🧰 Hardware Components** | - **ESP32-S3 DevKitM-1**: main MCU with Wi-Fi, Bluetooth, USB-OTG, AI acceleration<br>- **INMP441 Microphone**: I2S digital MEMS mic for voice capture<br>- **4x4 Matrix Keypad**: for numeric password entry<br>- **SG90 Servo Motor**: rotates 180° to simulate door unlocking<br>- **PCM5102A DAC Module**: digital-to-analog conversion for TTS audio<br>- **Speaker / Earphones**: for audio output<br>- **Breadboard & Jumper Wires**: physical assembly |
| **💻 Software Stack** | - **PlatformIO + VS Code** for ESP32 firmware<br>- **ESP32Servo** library for servo control<br>- **Keypad.h** library for matrix keypad<br>- **Flask (Python)** for backend server<br>- **Whisper** (OpenAI) for speech recognition<br>- **gTTS + pydub** for text-to-speech and audio formatting<br>- **requests** for sending queries to LLM API |
| **📂 Folder Structure** | ```
esp32-voice-lock/
├── firmware/             # PlatformIO firmware project
│   └── src/main.cpp      # ESP32 logic (voice input, keypad, servo)
├── backend/              # Python backend server
│   ├── server.py         # Audio handling + LLM requests
│   └── requirements.txt  # Python dependencies
├── circuit/              # Circuit diagram, pin mappings
├── audio_samples/        # Audio files generated by TTS
└── README.md             # This documentation
``` |
| **🚀 Setup Instructions** | **ESP32 Firmware Upload:**<br>1. `git clone https://github.com/menesscelik/IoT.git`<br>2. Open `firmware/` in PlatformIO<br>3. Connect ESP32-S3 via USB<br>4. Select the correct board in `platformio.ini`<br>5. Upload: `pio run --target upload`<br><br>**Backend Setup:**<br>1. `cd backend/`<br>2. Install dependencies: `pip install -r requirements.txt`<br>3. Run server: `python3 server.py`<br><br>**Testing:**<br>- Say your name into the mic<br>- Enter password<br>- If verified: servo unlocks + audio says “Access Granted”<br>- Else: no servo + audio says “Access Denied”<br>- Optional: Ask “What’s the weather like?” |
| **🧪 Example Workflow** | - 👤 User: says “Eren”<br>- 🧠 Whisper transcribes name → matches database<br>- 🔢 Prompted for password: enters “1967”<br>- ✅ Access granted → servo rotates 180°<br>- ❌ If wrong → no motion, speaker says “Access Denied”<br>- 🤖 User asks “What's the weather?” → Grok replies<br>- 🔊 TTS converts → speaker plays AI response |
| **📐 Circuit Notes** | - INMP441 → GPIOs (I2S: WS, SCK, SD)<br>- Keypad → GPIOs 4–11<br>- Servo → GPIO 18 (PWM capable)<br>- DAC → I2S output pins<br>- Circuit powered from ESP32 3.3V rail<br>- GND and power lines distributed via breadboard |
| **🧠 Technical Highlights** | - Real-time voice-to-text pipeline using Whisper<br>- Natural language Q&A using LLM<br>- Full-text-to-speech path via gTTS and DAC<br>- Modular, extensible architecture (firmware + backend)<br>- Python server acts as logic bridge for ESP32 |
| **📈 Future Upgrades** | - Store users in EEPROM or SPIFFS<br>- Add OLED display for status<br>- Implement mobile control via Bluetooth<br>- Offline model support (e.g., Vosk)<br>- Access logging + timestamp history<br>- Fingerprint or RFID integration |
| **📄 License & Credits** | - License: MIT<br>- Authors: Eren, Menes, [Third Teammate]<br>- Tech stack: Espressif, OpenAI, Grok, gTTS, PlatformIO |

---


